<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>4K Live Space Control</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
<style>
body{margin:0;background:black;color:white;font-family:monospace;overflow:hidden}
#panel{
position:absolute;top:20px;left:20px;
background:rgba(0,0,0,0.7);
padding:20px;border-radius:12px;
max-width:340px
}
#apod{
position:absolute;bottom:20px;left:20px;
width:340px;background:rgba(0,0,0,0.7);
padding:15px;border-radius:12px;
max-height:300px;overflow:auto
}
</style>
</head>
<body>

<div id="panel">Y√ºkleniyor...</div>
<div id="apod">APOD y√ºkleniyor...</div>

<script>
const NASA_KEY="DEMO_KEY";

/* 4K RENDER */
const scene=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,0.1,5000);
const renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setSize(window.innerWidth,window.innerHeight);
renderer.outputColorSpace=THREE.SRGBColorSpace;
document.body.appendChild(renderer.domElement);

/* YILDIZ */
const starGeo=new THREE.BufferGeometry();
const starCount=20000;
const pos=new Float32Array(starCount*3);
for(let i=0;i<starCount*3;i++){
pos[i]=(Math.random()-0.5)*4000;
}
starGeo.setAttribute("position",new THREE.BufferAttribute(pos,3));
const stars=new THREE.Points(starGeo,new THREE.PointsMaterial({size:1}));
scene.add(stars);

/* D√úNYA */
const loader=new THREE.TextureLoader();
const earthTex=loader.load("https://threejs.org/examples/textures/land_ocean_ice_cloud_2048.jpg");
const earth=new THREE.Mesh(
new THREE.SphereGeometry(6,128,128),
new THREE.MeshPhongMaterial({map:earthTex})
);
scene.add(earth);

const light=new THREE.DirectionalLight(0xffffff,1);
light.position.set(5,3,5);
scene.add(light);

camera.position.z=18;

/* ISS */
const iss=new THREE.Mesh(
new THREE.SphereGeometry(0.2,16,16),
new THREE.MeshBasicMaterial({color:0xff0000})
);
scene.add(iss);

function latLongToVector3(lat,lon,r){
const phi=(90-lat)*Math.PI/180;
const theta=(lon+180)*Math.PI/180;
return new THREE.Vector3(
-(r*Math.sin(phi)*Math.cos(theta)),
r*Math.cos(phi),
r*Math.sin(phi)*Math.sin(theta)
);
}

/* ISS LIVE */
async function updateISS(){
try{
const res=await fetch("https://api.wheretheiss.at/v1/satellites/25544");
const data=await res.json();
iss.position.copy(latLongToVector3(data.latitude,data.longitude,6.4));
document.getElementById("panel").innerHTML=
`üõ∞Ô∏è ISS<br>
Lat: ${data.latitude.toFixed(2)}<br>
Lon: ${data.longitude.toFixed(2)}<br>
Speed: ${data.velocity.toFixed(0)} km/h`;
}catch{}
}
setInterval(updateISS,4000);
updateISS();

/* APOD LIVE */
async function loadAPOD(){
try{
const res=await fetch(`https://api.nasa.gov/planetary/apod?api_key=${NASA_KEY}`);
const data=await res.json();
let media="";
if(data.media_type==="image"){
media=`<img src="${data.url}" width="100%">`;
}else{
media=`<iframe width="100%" height="200" src="${data.url}" frameborder="0" allowfullscreen></iframe>`;
}
document.getElementById("apod").innerHTML=
`<b>${data.title}</b><br>${media}`;
}catch{
document.getElementById("apod").innerHTML="APOD y√ºklenemedi";
}
}
loadAPOD();

/* ASTEROID LIVE */
async function loadAsteroids(){
try{
const today=new Date().toISOString().split("T")[0];
const res=await fetch(
`https://api.nasa.gov/neo/rest/v1/feed?start_date=${today}&end_date=${today}&api_key=${NASA_KEY}`
);
const data=await res.json();
document.getElementById("panel").innerHTML+=
`<br><br>‚òÑÔ∏è Asteroid: ${data.element_count}`;
}catch{}
}
loadAsteroids();

/* ANIMATION */
function animate(){
requestAnimationFrame(animate);
earth.rotation.y+=0.0006;
stars.rotation.y+=0.0001;
renderer.render(scene,camera);
}
animate();
</script>
</body>
</html>
